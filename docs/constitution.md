# Vibrary-Custom 開発憲法 (CONSTITUTION)

このドキュメントは、Vibrary-Custom プロジェクトにおける**不可侵の開発ルール**を定義する。
開発者（AI エージェント含む）は、いかなる理由があろうとも以下の規律を遵守しなければならない。

## 1. 和田式 TDD の徹底 (Wada-style TDD)

**「動作するきれいなコード」**を維持するため、以下のサイクルを絶対的な順序として実行すること。
実装コードをテストコードより先に書いてはならない。

### 第 1 原則: テストファースト (Red)

- **必ず最初にテストを書く。**
- テストコードを実行し、**「期待通りに失敗すること」**を確認するまで、プロダクトコードを 1 行も追加してはならない。
- コンパイルエラーも「失敗」とみなす。

### 第 2 原則: グリーン (Green)

- テストをパスさせるための**最小限の実装**を行う。
- この段階では、コードの美しさよりも「テストに通ること」を最優先する。
- 偽の実装（Hardcoded values）を用いてもよい。

### 第 3 原則: リファクタリング (Refactor)

- テストが通っている状態（Green）でのみ、コードを改善する。
- 重複の排除、可読性の向上、構造の整理を行う。
- リファクタリング中も頻繁にテストを実行し、機能が壊れていないことを保証する。

---

## 2. コミットと品質基準

- **壊れた状態でコミットしない**: メインブランチにマージするコードは、全てのテストがパスしていなければならない。
- **警告を無視しない**: Lint エラーや警告は、技術的負債である。発見次第、即座に解消する。

## 3. エージェント行動指針

- ユーザーから機能実装を依頼された場合、**実装計画 (Implementation Plan)** に必ず「TDD サイクル（Red/Green/Refactor）」のステップを明記する。
- 実装を開始する際は、まず**失敗するテストの実行結果**をユーザー（またはログ）に示すこと。
